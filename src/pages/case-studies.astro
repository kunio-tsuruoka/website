---
import { Header } from '../components/header';
import { PageHero } from '../components/ui/page-hero';
// src/pages/case-studies.astro
import Layout from '../layouts/layout.astro';
import JsonLd from '../components/seo/json-ld.astro';

// ページネーション設定
const ITEMS_PER_PAGE = 4;
const url = new URL(Astro.request.url);
const currentPage = Math.max(1, Number(url.searchParams.get('page')) || 1);

const allCases = [
  {
    title: 'iroAI介護 - 介護情報マッチングプラットフォーム',
    industry: '介護・ヘルスケア',
    scale: '株式会社iroAI',
    period: '本開発: 2ヶ月',
    url: 'https://iro-ai.com/',
    image: 'https://iro-ai.com/wp-content/uploads/2026/01/TOP.jpg',
    challenge: {
      title: '課題',
      description:
        '介護サービスを必要とする方やそのご家族が、最適な介護情報を見つけることが困難でした。情報が散在し、比較検討に時間がかかる状況を解決したいというニーズがありました。',
      points: [
        '介護サービス情報が散在し、比較検討が困難',
        '高齢者やインターネット初心者にとって使いにくいUI',
        '地域密着型の介護情報へのアクセスが限られている',
      ],
    },
    solution: {
      title: '解決策',
      description:
        'LINEベースの介護情報マッチングプラットフォームを開発。文字入力不要で選択肢をタップするだけで最適な介護サービスを紹介。',
      points: [
        '幅広い年齢層が使い慣れたLINE上でサービスを提供',
        '文字入力不要、選択肢タップのみで完結するシンプルUI',
        'いくつかの質問に答えるだけで推奨介護サービスを紹介',
      ],
    },
    results: [
      { label: 'UI操作性', value: '文字入力不要' },
      { label: 'アクセシビリティ', value: '大幅向上' },
      { label: '情報マッチング', value: 'AI活用' },
    ],
  },
  {
    title: 'HRパーソナリティ診断システムの開発',
    industry: 'HR Tech・人材サービス',
    scale: '人材マッチング企業（従業員30名）',
    period: 'PoC: 2週間 → 本開発: 3ヶ月',
    challenge: {
      title: '課題',
      description:
        '採用時のパーソナリティ診断が紙ベースで実施され、集計・分析に時間がかかっていました。候補者の性格特性を定量化し、採用ミスマッチを減らしたいというニーズがありました。',
      points: [
        '紙ベースの診断票の集計に1人あたり30分以上',
        '診断結果のデータ蓄積・分析ができていない',
        '採用後のミスマッチ率が25%と高い',
      ],
    },
    solution: {
      title: '解決策',
      description:
        'HEXACO性格診断をベースにしたWeb診断システムをPoC開発。効果を検証後、本システムを構築。',
      points: [
        'PoCで診断ロジックと結果表示UIを2週間で実装',
        'TypeScript + Reactでの高速なWeb診断システム',
        'データベース連携で診断結果の蓄積・分析基盤を構築',
      ],
    },
    results: [
      { label: '診断時間短縮', value: '80%' },
      { label: 'データ分析', value: '可能に' },
      { label: 'ミスマッチ率', value: '12%改善' },
    ],
  },
  {
    title: '学習動画プラットフォームのPoC',
    industry: '教育・EdTech',
    scale: '学校運営企業（従業員15名）',
    period: 'PoC: 1週間 → 本開発: 2ヶ月',
    challenge: {
      title: '課題',
      description:
        '学習コンテンツをYouTubeで配信していたが、学習進捗管理ができない。生徒ごとの習熟度を把握し、効果的な学習体験を提供したい。',
      points: [
        '動画視聴状況の把握ができない',
        '生徒の理解度テストや進捗管理が不可能',
        'コンテンツの検索性・整理が不十分',
      ],
    },
    solution: {
      title: '解決策',
      description: '1週間でMVP動画プラットフォームを開発し、学習管理機能の有効性を検証。',
      points: [
        'TypeScriptベースの動画プレイヤーと進捗管理機能',
        '理解度テストとレベル別コンテンツ分類',
        '生徒ごとの学習ダッシュボードで進捗可視化',
      ],
    },
    results: [
      { label: '学習継続率', value: '45%向上' },
      { label: '進捗可視化', value: '100%' },
      { label: 'コンテンツ整理', value: '3カテゴリ' },
    ],
  },
  {
    title: 'ERPデモシステムのPoC開発',
    industry: '製造業・物流DX',
    scale: '中小製造業（従業員80名）',
    period: 'PoC: 2週間',
    challenge: {
      title: '課題',
      description:
        'Excelベースの在庫管理・受発注管理に限界を感じていたが、既製ERPは高額で導入ハードルが高い。自社に最適化されたシステムを段階的に構築したい。',
      points: [
        'Excelでの在庫管理が属人化・ブラックボックス化',
        '受発注情報が部門間で共有されず、在庫過不足が発生',
        '既製ERPは機能過多で高額、カスタマイズも困難',
      ],
    },
    solution: {
      title: '解決策',
      description: '2週間で在庫管理・受発注の基本機能をPoCとして実装し、実際の業務で検証。',
      points: [
        '在庫入出庫・発注管理のコア機能をTypeScriptで実装',
        '部門間でリアルタイムに在庫状況を共有',
        '段階的な機能拡張を前提としたモジュール設計',
      ],
    },
    results: [
      { label: 'PoC期間', value: '2週間' },
      { label: '在庫可視化', value: 'リアルタイム' },
      { label: '初期コスト', value: '既製ERP比1/5' },
    ],
  },
  {
    title: 'Inertia.js技術検証とSPA開発',
    industry: 'SaaS・Web開発',
    scale: 'スタートアップ（従業員8名）',
    period: 'PoC: 1週間 → 本開発: 2ヶ月',
    challenge: {
      title: '課題',
      description:
        '既存のMPA（多ページアプリ）からSPAへの移行を検討していたが、Next.jsなどのフレームワークは学習コストが高い。バックエンドとの統合もシームレスにしたい。',
      points: [
        'SPAフレームワークの学習コストが高く開発が遅延',
        'バックエンド（Laravel/Rails）との統合が複雑',
        'SEO対応とSPAの両立が難しい',
      ],
    },
    solution: {
      title: '解決策',
      description: 'Inertia.jsのPoCで技術検証。従来フレームワークとの親和性を確認後、本開発へ。',
      points: [
        '1週間のPoCでInertia.js + React + TypeScriptの実装例を作成',
        'Laravel/Railsとの統合がシームレスであることを実証',
        'SSRなしでもSEO対応可能な設計を確立',
      ],
    },
    results: [
      { label: '学習コスト', value: '60%削減' },
      { label: '開発速度', value: '50%向上' },
      { label: 'バックエンド統合', value: 'ゼロコスト' },
    ],
  },
  {
    title: 'マッチングプラットフォームの開発',
    industry: 'HR Tech・マッチング',
    scale: 'スタートアップ（従業員20名）',
    period: 'PoC: 2週間 → 本開発: 6ヶ月',
    challenge: {
      title: '課題',
      description:
        '求職者と企業をつなぐマッチングプラットフォームを構築したいが、技術選定から設計まで全てが未確定。MVP開発で市場検証を早期に行いたい。',
      points: [
        'マッチングアルゴリズムの設計方針が未確定',
        'フロント・バックエンドの技術スタック選定が必要',
        '決済システム連携の実現可能性を検証したい',
      ],
    },
    solution: {
      title: '解決策',
      description: '2週間で基本的なマッチング機能とユーザー登録フローをPoC実装。',
      points: [
        'Laravel（バックエンド）+ React（フロント）の構成を検証',
        'シンプルなマッチングロジックとメッセージング機能の実装',
        'Stripe連携のPoC実装で決済フローを実証',
      ],
    },
    results: [
      { label: 'MVP開発期間', value: '6ヶ月' },
      { label: '初期ユーザー獲得', value: '200名' },
      { label: 'マッチング成立率', value: '35%' },
    ],
  },
  {
    title: '日本語発音評価AIシステムのPoC',
    industry: '教育・EdTech',
    scale: '日本語教育機関',
    period: 'PoC: 3週間',
    challenge: {
      title: '課題',
      description:
        '日本語学習者の発音を評価する際、講師の主観的判断に頼っており、客観的な評価基準がない。AIによる自動発音評価システムで学習効率を向上させたい。',
      points: [
        '発音評価が講師の主観に依存し、基準が不明確',
        '一対一の発音指導に時間がかかりスケールしない',
        '学習者が自習時に発音を確認する手段がない',
      ],
    },
    solution: {
      title: '解決策',
      description: 'Pythonベースの音声認識・発音評価PoCを3週間で開発。',
      points: [
        '音声認識APIを活用した発音精度評価エンジン',
        '音素レベルでの誤り検出と改善提案アルゴリズム',
        'Web UIでの録音・即時フィードバック機能',
      ],
    },
    results: [
      { label: '評価精度', value: '85%' },
      { label: '評価時間', value: '即時' },
      { label: '自習効率', value: '3倍' },
    ],
  },
  {
    title: '従業員向け健康管理システムの開発',
    industry: 'SaaS・企業向けシステム',
    scale: '大手企業（従業員数1000名以上）',
    period: 'PoC: 3週間 → 本開発: 5ヶ月',
    challenge: {
      title: '課題',
      description:
        '従業員の健康管理データが紙やExcelで分散管理されており、集計・分析に時間がかかる。データを一元化し、効率的な健康支援プログラムを提供したい。',
      points: [
        '紙ベースのデータ管理で集計に時間がかかる',
        '複数の健康プログラムが分散し一元管理できていない',
        '従業員の継続的なデータ蓄積・分析ができない',
      ],
    },
    solution: {
      title: '解決策',
      description: '3週間でデータ管理機能のPoCを実装。効果検証後、本格的なシステムを構築。',
      points: [
        'モノレポ構成でのフルスタック開発環境を構築',
        'カスタマイズ可能なデータ収集システム',
        '自動通知・リマインダー機能による継続率向上',
      ],
    },
    results: [
      { label: 'データ回収率', value: '60%向上' },
      { label: 'プログラム継続率', value: '2.5倍' },
      { label: '集計時間', value: '90%削減' },
    ],
  },
];

// ページネーション計算
const totalPages = Math.ceil(allCases.length / ITEMS_PER_PAGE);
const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
const cases = allCases.slice(startIndex, startIndex + ITEMS_PER_PAGE);
const hasNextPage = currentPage < totalPages;
const hasPrevPage = currentPage > 1;
---

<Layout
  title="導入事例 | Beekle"
  description="Beekleの導入事例。HR Tech、製造業、教育など様々な業界でのシステム開発成功事例をご紹介。ゼロスタート（PoC）から本開発まで、お客様の課題解決をサポートした実績をご覧ください。"
>
  <Header client:load />
  <main class="pt-20">
    <PageHero
      title="導入事例"
      subtitle="お客様の課題解決と事業成長をサポートした実績をご紹介します"
    />

    <section class="mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl py-16">

      <div class="space-y-24">
        {cases.map((case_study, index) => (
          <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
            <div class="p-8 lg:p-12">
              <div class="lg:grid lg:grid-cols-12 lg:gap-8">
                {/* ヘッダー情報 */}
                <div class="lg:col-span-12 mb-8">
                  <div class="flex flex-col lg:flex-row lg:items-start lg:gap-8">
                    {case_study.image && (
                      <div class="w-full lg:w-80 flex-shrink-0 mb-6 lg:mb-0">
                        <img
                          src={case_study.image}
                          alt={case_study.title}
                          class="w-full h-48 object-cover rounded-xl shadow-md"
                        />
                      </div>
                    )}
                    <div class="flex-1">
                      <h2 class="text-3xl font-bold text-gray-900">
                        {case_study.url ? (
                          <a href={case_study.url} target="_blank" rel="noopener noreferrer" class="hover:text-primary-500 transition-colors">
                            {case_study.title}
                            <svg class="inline-block w-5 h-5 ml-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                            </svg>
                          </a>
                        ) : (
                          case_study.title
                        )}
                      </h2>
                      <div class="mt-4 flex flex-wrap gap-4">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100">
                          {case_study.industry}
                        </span>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100">
                          {case_study.scale}
                        </span>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100">
                          開発期間：{case_study.period}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                {/* 課題と解決策 */}
                <div class="lg:col-span-6">
                  <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">{case_study.challenge.title}</h3>
                    <p class="text-gray-600 mb-4">{case_study.challenge.description}</p>
                    <ul class="space-y-2">
                      {case_study.challenge.points.map((point) => (
                        <li class="flex items-start">
                          <span class="flex-shrink-0 h-6 w-6 text-primary-500">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                            </svg>
                          </span>
                          <span class="ml-2 text-gray-600">{point}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>

                <div class="lg:col-span-6">
                  <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">{case_study.solution.title}</h3>
                    <p class="text-gray-600 mb-4">{case_study.solution.description}</p>
                    <ul class="space-y-2">
                      {case_study.solution.points.map((point) => (
                        <li class="flex items-start">
                          <span class="flex-shrink-0 h-6 w-6 text-primary-500">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                          </span>
                          <span class="ml-2 text-gray-600">{point}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>

                {/* 成果 */}
                <div class="lg:col-span-12">
                  <div class="border-t pt-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-6">導入効果</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                      {case_study.results.map((result) => (
                        <div class="bg-gray-50 rounded-lg p-6 text-center">
                          <div class="text-4xl font-bold text-primary-500">{result.value}</div>
                          <div class="mt-2 text-sm text-gray-600">{result.label}</div>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>

      {/* ページネーション */}
      {totalPages > 1 && (
        <div class="mt-16 flex justify-center items-center gap-4">
          {hasPrevPage ? (
            <a
              href={`/case-studies?page=${currentPage - 1}`}
              class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"
            >
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
              </svg>
              前へ
            </a>
          ) : (
            <span class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-400 bg-gray-100 border border-gray-200 rounded-lg cursor-not-allowed">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
              </svg>
              前へ
            </span>
          )}

          <div class="flex items-center gap-2">
            {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (
              <a
                href={`/case-studies?page=${page}`}
                class={`inline-flex items-center justify-center w-10 h-10 text-sm font-medium rounded-lg ${
                  page === currentPage
                    ? 'text-white bg-primary-500'
                    : 'text-gray-700 bg-white border border-gray-300 hover:bg-gray-50'
                }`}
              >
                {page}
              </a>
            ))}
          </div>

          {hasNextPage ? (
            <a
              href={`/case-studies?page=${currentPage + 1}`}
              class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"
            >
              次へ
              <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </a>
          ) : (
            <span class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-400 bg-gray-100 border border-gray-200 rounded-lg cursor-not-allowed">
              次へ
              <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </span>
          )}
        </div>
      )}

      <div class="mt-8 text-center text-sm text-gray-500">
        全{allCases.length}件中 {startIndex + 1}〜{Math.min(startIndex + ITEMS_PER_PAGE, allCases.length)}件を表示
      </div>

      {/* CTA セクション */}
      <div class="mt-24 text-center pb-16">
        <h2 class="text-3xl font-bold text-gray-900">お客様の事業成長をサポートします</h2>
        <p class="mt-4 text-xl text-gray-600">
          まずは無料相談からお気軽にお問い合わせください
        </p>
        <div class="mt-8">
          <a
            href="/contact"
            class="inline-flex items-center justify-center px-8 py-4 text-lg font-medium text-white bg-primary-500 border border-transparent rounded-full hover:bg-primary-600"
          >
            無料相談を予約する
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
          </a>
        </div>
      </div>
    </section>
  </main>
</Layout>